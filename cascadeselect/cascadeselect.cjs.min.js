"use strict";var e=require("primevue/utils"),t=require("primevue/overlayeventbus"),i=require("primevue/ripple"),n=require("vue"),l=require("primevue/portal");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=o(t),r=o(i),a=o(l),p={name:"CascadeSelectSub",emits:["option-select","optiongroup-select"],props:{selectionPath:Array,level:Number,options:Array,optionLabel:String,optionValue:String,optionGroupLabel:String,optionGroupChildren:Array,parentActive:Boolean,dirty:Boolean,templates:null,root:Boolean},data:()=>({activeOption:null}),mounted(){if(this.selectionPath&&this.options&&!this.dirty)for(let e of this.options)if(this.selectionPath.includes(e)){this.activeOption=e;break}this.root||this.position()},watch:{parentActive(e){e||(this.activeOption=null)}},methods:{onOptionClick(e,t){this.isOptionGroup(t)?(this.activeOption=this.activeOption===t?null:t,this.$emit("optiongroup-select",{originalEvent:e,value:t})):this.$emit("option-select",{originalEvent:e,value:this.getOptionValue(t)})},onOptionSelect(e){this.$emit("option-select",e)},onOptionGroupSelect(e){this.$emit("optiongroup-select",e)},getOptionLabel(t){return this.optionLabel?e.ObjectUtils.resolveFieldData(t,this.optionLabel):t},getOptionValue(t){return this.optionValue?e.ObjectUtils.resolveFieldData(t,this.optionValue):t},getOptionGroupLabel(t){return this.optionGroupLabel?e.ObjectUtils.resolveFieldData(t,this.optionGroupLabel):null},getOptionGroupChildren(t){return e.ObjectUtils.resolveFieldData(t,this.optionGroupChildren[this.level])},isOptionGroup(e){return Object.prototype.hasOwnProperty.call(e,this.optionGroupChildren[this.level])},getOptionLabelToRender(e){return this.isOptionGroup(e)?this.getOptionGroupLabel(e):this.getOptionLabel(e)},getItemClass(e){return["p-cascadeselect-item",{"p-cascadeselect-item-group":this.isOptionGroup(e),"p-cascadeselect-item-active p-highlight":this.isOptionActive(e)}]},isOptionActive(e){return this.activeOption===e},onKeyDown(e,t,i){switch(e.code){case"Down":case"ArrowDown":var n=this.$el.children[i+1];n&&n.children[0].focus();break;case"Up":case"ArrowUp":var l=this.$el.children[i-1];l&&l.children[0].focus();break;case"Right":case"ArrowRight":this.isOptionGroup(t)&&(this.isOptionActive(t)?e.currentTarget.nextElementSibling.children[0].children[0].focus():this.activeOption=t);break;case"Left":case"ArrowLeft":this.activeOption=null;var o=e.currentTarget.parentElement.parentElement.previousElementSibling;o&&o.focus();break;case"Enter":case"Space":this.onOptionClick(e,t)}e.preventDefault()},position(){const t=this.$el.parentElement,i=e.DomHandler.getOffset(t),n=e.DomHandler.getViewport(),l=this.$el.offsetParent?this.$el.offsetWidth:e.DomHandler.getHiddenElementOuterWidth(this.$el),o=e.DomHandler.getOuterWidth(t.children[0]);parseInt(i.left,10)+o+l>n.width-e.DomHandler.calculateScrollbarWidth()&&(this.$el.style.left="-100%")}},directives:{ripple:r.default}};const c=["role"],d=["aria-label","aria-selected","aria-expanded","aria-setsize","aria-posinset","aria-level"],u=["onClick","onKeydown"],h={key:1,class:"p-cascadeselect-item-text"},b={key:2,class:"p-cascadeselect-group-icon pi pi-angle-right"};p.render=function(e,t,i,l,o,s){const r=n.resolveComponent("CascadeSelectSub",!0),a=n.resolveDirective("ripple");return n.openBlock(),n.createElementBlock("ul",{class:"p-cascadeselect-panel p-cascadeselect-items","aria-orientation":"horizontal",role:!0===i.root?"tree":"group"},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(i.options,((e,t)=>(n.openBlock(),n.createElementBlock("li",{key:s.getOptionLabelToRender(e),class:n.normalizeClass(s.getItemClass(e)),role:"treeitem","aria-label":s.getOptionLabelToRender(e),"aria-selected":s.isOptionActive(e),"aria-expanded":s.isOptionActive(e),"aria-setsize":i.options.length,"aria-posinset":t+1,"aria-level":i.level+1},[n.withDirectives((n.openBlock(),n.createElementBlock("div",{class:"p-cascadeselect-item-content",onClick:t=>s.onOptionClick(t,e),tabindex:"0",onKeydown:i=>s.onKeyDown(i,e,t)},[i.templates.option?(n.openBlock(),n.createBlock(n.resolveDynamicComponent(i.templates.option),{key:0,option:e},null,8,["option"])):(n.openBlock(),n.createElementBlock("span",h,n.toDisplayString(s.getOptionLabelToRender(e)),1)),s.isOptionGroup(e)?(n.openBlock(),n.createElementBlock("span",b)):n.createCommentVNode("",!0)],40,u)),[[a]]),s.isOptionGroup(e)&&s.isOptionActive(e)?(n.openBlock(),n.createBlock(r,{key:0,class:"p-cascadeselect-sublist",selectionPath:i.selectionPath,options:s.getOptionGroupChildren(e),optionLabel:i.optionLabel,optionValue:i.optionValue,level:i.level+1,onOptionSelect:s.onOptionSelect,onOptiongroupSelect:s.onOptionGroupSelect,optionGroupLabel:i.optionGroupLabel,optionGroupChildren:i.optionGroupChildren,parentActive:s.isOptionActive(e),dirty:i.dirty,templates:i.templates,"aria-level":i.level+2},null,8,["selectionPath","options","optionLabel","optionValue","level","onOptionSelect","onOptiongroupSelect","optionGroupLabel","optionGroupChildren","parentActive","dirty","templates","aria-level"])):n.createCommentVNode("",!0)],10,d)))),128))],8,c)};var v={name:"CascadeSelect",emits:["update:modelValue","change","group-change","before-show","before-hide","hide","show","focus","blur"],data:()=>({selectionPath:null,focused:!1,overlayVisible:!1,dirty:!1}),props:{modelValue:null,options:Array,optionLabel:String,optionValue:String,optionGroupLabel:String,optionGroupChildren:Array,placeholder:String,disabled:Boolean,dataKey:null,tabindex:String,appendTo:{type:String,default:"body"},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner pi-spin"},inputId:null,inputClass:null,inputStyle:null,inputProps:null,panelClass:null,panelProps:null,"aria-labelledby":{type:String,default:null},"aria-label":{type:String,default:null}},outsideClickListener:null,scrollHandler:null,resizeListener:null,overlay:null,beforeUnmount(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(e.ZIndexUtils.clear(this.overlay),this.overlay=null)},mounted(){this.updateSelectionPath()},watch:{modelValue(){this.updateSelectionPath()}},methods:{onOptionSelect(e){this.$emit("update:modelValue",e.value),this.$emit("change",e),this.hide(),this.$refs.focusInput.focus()},onOptionGroupSelect(e){this.dirty=!0,this.$emit("group-change",e)},getOptionLabel(t){return this.optionLabel?e.ObjectUtils.resolveFieldData(t,this.optionLabel):t},getOptionValue(t){return this.optionValue?e.ObjectUtils.resolveFieldData(t,this.optionValue):t},getOptionGroupChildren(t,i){return e.ObjectUtils.resolveFieldData(t,this.optionGroupChildren[i])},isOptionGroup(e,t){return Object.prototype.hasOwnProperty.call(e,this.optionGroupChildren[t])},updateSelectionPath(){let e;if(null!=this.modelValue&&this.options)for(let t of this.options)if(e=this.findModelOptionInGroup(t,0),e)break;this.selectionPath=e},findModelOptionInGroup(t,i){if(this.isOptionGroup(t,i)){let e;for(let n of this.getOptionGroupChildren(t,i))if(e=this.findModelOptionInGroup(n,i+1),e)return e.unshift(t),e}else if(e.ObjectUtils.equals(this.modelValue,this.getOptionValue(t),this.dataKey))return[t];return null},show(){this.$emit("before-show"),this.overlayVisible=!0},hide(){this.$emit("before-hide"),this.overlayVisible=!1},onFocus(e){this.focused=!0,this.$emit("focus",e)},onBlur(e){this.focused=!1,this.$emit("blur",e)},onClick(e){this.disabled||this.loading||this.overlay&&this.overlay.contains(e.target)||(this.overlayVisible?this.hide():this.show(),this.$refs.focusInput.focus())},onOverlayEnter(t){e.ZIndexUtils.set("overlay",t,this.$primevue.config.zIndex.overlay),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},onOverlayLeave(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.overlay=null,this.dirty=!1},onOverlayAfterLeave(t){e.ZIndexUtils.clear(t)},alignOverlay(){"self"===this.appendTo?e.DomHandler.relativePosition(this.overlay,this.$el):(this.overlay.style.minWidth=e.DomHandler.getOuterWidth(this.$el)+"px",e.DomHandler.absolutePosition(this.overlay,this.$el))},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.overlayVisible&&this.overlay&&!this.$el.contains(e.target)&&!this.overlay.contains(e.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new e.ConnectedOverlayScrollHandler(this.$refs.container,(()=>{this.overlayVisible&&this.hide()}))),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&!e.DomHandler.isTouchDevice()&&this.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},overlayRef(e){this.overlay=e},onKeyDown(t){if(this.disabled||this.loading)t.preventDefault();else switch(t.code){case"Down":case"ArrowDown":this.overlayVisible?e.DomHandler.findSingle(this.overlay,".p-highlight")?e.DomHandler.findSingle(this.overlay,".p-highlight").focus():e.DomHandler.findSingle(this.overlay,".p-cascadeselect-item").children[0].focus():this.show(),t.preventDefault();break;case"Space":case"Enter":this.overlayVisible?this.hide():this.show(),t.preventDefault();break;case"Escape":case"Tab":this.overlayVisible&&(this.hide(),t.preventDefault())}},onOverlayClick(e){s.default.emit("overlay-click",{originalEvent:e,target:this.$el})}},computed:{containerClass(){return["p-cascadeselect p-component p-inputwrapper",{"p-disabled":this.disabled,"p-focus":this.focused,"p-inputwrapper-filled":this.modelValue,"p-inputwrapper-focus":this.focused||this.overlayVisible}]},labelClass(){return["p-cascadeselect-label",{"p-placeholder":this.label===this.placeholder,"p-cascadeselect-label-empty":!this.$slots.value&&("p-emptylabel"===this.label||0===this.label.length)}]},label(){return this.selectionPath?this.getOptionLabel(this.selectionPath[this.selectionPath.length-1]):this.placeholder||"p-emptylabel"},panelStyleClass(){return["p-cascadeselect-panel p-component",this.panelClass,{"p-input-filled":"filled"===this.$primevue.config.inputStyle,"p-ripple-disabled":!1===this.$primevue.config.ripple}]},dropdownIconClass(){return["p-cascadeselect-trigger-icon",this.loading?this.loadingIcon:"pi pi-chevron-down"]},listId(){return this.overlayVisible?e.UniqueComponentId()+"_list":null}},components:{CascadeSelectSub:p,Portal:a.default}};const m={class:"p-hidden-accessible"},y=["id","disabled","tabindex","aria-labelledby","aria-label","aria-expanded","aria-controls"],f=["aria-expanded"],g={class:"p-cascadeselect-items-wrapper"};!function(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===i&&n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}("\n.p-cascadeselect {\r\n    display: -webkit-inline-box;\r\n    display: -ms-inline-flexbox;\r\n    display: inline-flex;\r\n    cursor: pointer;\r\n    position: relative;\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n        -ms-user-select: none;\r\n            user-select: none;\n}\n.p-cascadeselect-trigger {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -webkit-box-align: center;\r\n        -ms-flex-align: center;\r\n            align-items: center;\r\n    -webkit-box-pack: center;\r\n        -ms-flex-pack: center;\r\n            justify-content: center;\r\n    -ms-flex-negative: 0;\r\n        flex-shrink: 0;\n}\n.p-cascadeselect-label {\r\n    display: block;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    -webkit-box-flex: 1;\r\n        -ms-flex: 1 1 auto;\r\n            flex: 1 1 auto;\r\n    width: 1%;\r\n    text-overflow: ellipsis;\r\n    cursor: pointer;\n}\n.p-cascadeselect-label-empty {\r\n    overflow: hidden;\r\n    visibility: hidden;\n}\n.p-cascadeselect .p-cascadeselect-panel {\r\n    min-width: 100%;\n}\n.p-cascadeselect-panel {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\n}\n.p-cascadeselect-item {\r\n    cursor: pointer;\r\n    font-weight: normal;\r\n    white-space: nowrap;\n}\n.p-cascadeselect-item-content {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -webkit-box-align: center;\r\n        -ms-flex-align: center;\r\n            align-items: center;\r\n    overflow: hidden;\r\n    position: relative;\n}\n.p-cascadeselect-group-icon {\r\n    margin-left: auto;\n}\n.p-cascadeselect-items {\r\n    margin: 0;\r\n    padding: 0;\r\n    list-style-type: none;\r\n    min-width: 100%;\n}\n.p-fluid .p-cascadeselect {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\n}\n.p-fluid .p-cascadeselect .p-cascadeselect-label {\r\n    width: 1%;\n}\n.p-cascadeselect-sublist {\r\n    position: absolute;\r\n    min-width: 100%;\r\n    z-index: 1;\r\n    display: none;\n}\n.p-cascadeselect-item-active {\r\n    overflow: visible !important;\n}\n.p-cascadeselect-item-active > .p-cascadeselect-sublist {\r\n    display: block;\r\n    left: 100%;\r\n    top: 0;\n}\r\n"),v.render=function(e,t,i,l,o,s){const r=n.resolveComponent("CascadeSelectSub"),a=n.resolveComponent("Portal");return n.openBlock(),n.createElementBlock("div",{ref:"container",class:n.normalizeClass(s.containerClass),onClick:t[4]||(t[4]=e=>s.onClick(e))},[n.createElementVNode("div",m,[n.createElementVNode("input",n.mergeProps({ref:"focusInput",role:"combobox",type:"text",id:i.inputId,class:i.inputClass,style:i.inputStyle,readonly:"",disabled:i.disabled,tabindex:i.tabindex,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,"aria-haspopup":"tree","aria-expanded":o.overlayVisible,"aria-controls":s.listId,onFocus:t[0]||(t[0]=(...e)=>s.onFocus&&s.onFocus(...e)),onBlur:t[1]||(t[1]=(...e)=>s.onBlur&&s.onBlur(...e)),onKeydown:t[2]||(t[2]=(...e)=>s.onKeyDown&&s.onKeyDown(...e))},i.inputProps),null,16,y)]),n.createElementVNode("span",{class:n.normalizeClass(s.labelClass)},[n.renderSlot(e.$slots,"value",{value:i.modelValue,placeholder:i.placeholder},(()=>[n.createTextVNode(n.toDisplayString(s.label),1)]))],2),n.createElementVNode("div",{class:"p-cascadeselect-trigger",role:"button","aria-haspopup":"tree","aria-expanded":o.overlayVisible},[n.renderSlot(e.$slots,"indicator",{},(()=>[n.createElementVNode("span",{class:n.normalizeClass(s.dropdownIconClass)},null,2)]))],8,f),n.createVNode(a,{appendTo:i.appendTo},{default:n.withCtx((()=>[n.createVNode(n.Transition,{name:"p-connected-overlay",onEnter:s.onOverlayEnter,onLeave:s.onOverlayLeave,onAfterLeave:s.onOverlayAfterLeave},{default:n.withCtx((()=>[o.overlayVisible?(n.openBlock(),n.createElementBlock("div",n.mergeProps({key:0,ref:s.overlayRef,class:s.panelStyleClass,onClick:t[3]||(t[3]=(...e)=>s.onOverlayClick&&s.onOverlayClick(...e))},i.panelProps),[n.createElementVNode("div",g,[n.createVNode(r,{id:s.listId,options:i.options,selectionPath:o.selectionPath,optionLabel:i.optionLabel,optionValue:i.optionValue,level:0,templates:e.$slots,optionGroupLabel:i.optionGroupLabel,optionGroupChildren:i.optionGroupChildren,onOptionSelect:s.onOptionSelect,onOptiongroupSelect:s.onOptionGroupSelect,dirty:o.dirty,root:!0},null,8,["id","options","selectionPath","optionLabel","optionValue","templates","optionGroupLabel","optionGroupChildren","onOptionSelect","onOptiongroupSelect","dirty"])])],16)):n.createCommentVNode("",!0)])),_:1},8,["onEnter","onLeave","onAfterLeave"])])),_:1},8,["appendTo"])],2)},module.exports=v;
